(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{362:function(t,e,n){"use strict";n.d(e,"a",(function(){return _})),n.d(e,"d",(function(){return w})),n.d(e,"b",(function(){return O})),n.d(e,"c",(function(){return S}));n(26),n(15),n(19),n(31),n(32);var r=n(8),o=n(3),c=(n(23),n(47)),l=n.n(c),f=n(366),d=n.n(f),v=n(94),h=n.n(v);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function y(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var _="".concat("https://altitudeapp.altitude.co.th","/api/v1/user");function w(t,path){return d()(t,path)}function O(t,e){if(!t)return{"Content-Type":"application/json"};var n={"Content-Type":"application/json"};e&&(n={"Content-Type":"multipart/form-data"});var r=h.a.get("token");return r&&(n["auth-token"]="Bearer ".concat(r)),n}function j(t){return t.response&&401===t.response.status&&navigator.onLine&&(window.location.href="/no_permission?locale=".concat(window.$nuxt.$store.state.language)),t.response}function S(t,e,n){return x.apply(this,arguments)}function x(){return(x=Object(o.a)(regeneratorRuntime.mark((function t(e,n,r){var o,c,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=O(r.auth),c=y(y({},o),r.headers),t.prev=2,t.next=5,l()({method:e,url:n,headers:c,data:r.data,params:r.params});case 5:return f=t.sent,t.abrupt("return",f);case 9:return t.prev=9,t.t0=t.catch(2),t.abrupt("return",j(t.t0));case 12:return t.prev=12,t.finish(12);case 14:case"end":return t.stop()}}),t,null,[[2,9,12,14]])})))).apply(this,arguments)}},364:function(t,e,n){"use strict";n.d(e,"a",(function(){return v})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return m})),n.d(e,"d",(function(){return y}));n(365),n(70),n(16),n(71),n(72),n(67),n(68),n(44),n(40),n(33),n(15),n(42),n(43);var r=n(363),o=n.n(r),c=n(0),l=n.n(c);function f(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function v(t){return t?l()(t).format("DD/MM/YYYY"):"-"}function h(t){return t?l()(t).local().format("DD/MM/YYYY HH:mm:ss"):"-"}function m(t){return t?Number(t).toFixed(0).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):Number(0)}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=new FormData;return o.a.each(t,(function(c,l){var d=l;if(e&&(d="".concat(e,"[").concat(l,"]")),o.a.includes(n,l))o.a.isArray(c)?o.a.forEach(c,(function(t,e){t instanceof File?(r.append("".concat(d,"[]"),t),r.delete("".concat(d,"[][").concat(e,"][][src]")),r.delete("".concat(d,"[][").concat(e,"][][index]"))):(t.action||(t.action="edit"),o.a.forEach(t,(function(t,e){r.append("".concat(d,"[][").concat(e,"]"),t)})))})):c instanceof File?(r.append("".concat(d),c),r.delete("".concat(d,"[").concat(l,"][][src]")),r.delete("".concat(d,"[").concat(l,"][][index]"))):r.append("".concat(d,"[").concat(l,"]"),c);else if(o.a.isArray(t[l])&&!o.a.isEmpty(t[l]))o.a.each(c,(function(t,n){if(d="".concat(l,"[]"),e&&(d="".concat(e,"[").concat(l,"][]")),o.a.isObject(c[n])&&!o.a.isEmpty(c[n])){var v,h=f(y(t,d).entries());try{for(h.s();!(v=h.n()).done;){var m=v.value;r.append(m[0],m[1])}}catch(t){h.e(t)}finally{h.f()}}else r.append("".concat(d),t)}));else if(o.a.isObject(t[l])){var v,h=f(y(c,d).entries());try{for(h.s();!(v=h.n()).done;){var m=v.value;r.append(m[0],m[1])}}catch(t){h.e(t)}finally{h.f()}}else r.append(d,c)})),r}},365:function(t,e,n){"use strict";var r=n(6),o=n(34),c=n(35),l=n(276),f=n(69),d=n(11),v=n(55).f,h=n(56).f,m=n(13).f,y=n(367).trim,_="Number",w=r.Number,O=w,j=w.prototype,S=c(n(93)(j))==_,x="trim"in String.prototype,A=function(t){var e=f(t,!1);if("string"==typeof e&&e.length>2){var n,r,o,c=(e=x?e.trim():y(e,3)).charCodeAt(0);if(43===c||45===c){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===c){switch(e.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+e}for(var code,l=e.slice(2),i=0,d=l.length;i<d;i++)if((code=l.charCodeAt(i))<48||code>o)return NaN;return parseInt(l,r)}}return+e};if(!w(" 0o1")||!w("0b1")||w("+0x1")){w=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof w&&(S?d((function(){j.valueOf.call(n)})):c(n)!=_)?l(new O(A(e)),n,w):A(e)};for(var I,$=n(9)?v(O):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),D=0;$.length>D;D++)o(O,I=$[D])&&!o(w,I)&&m(w,I,h(O,I));w.prototype=j,j.constructor=w,n(17)(r,_,w)}},366:function(t,e,n){var r,o,c;c=function(){function t(t){var e=[];if(0===t.length)return"";if("string"!=typeof t[0])throw new TypeError("Url must be a string. Received "+t[0]);if(t[0].match(/^[^/:]+:\/*$/)&&t.length>1){var n=t.shift();t[0]=n+t[0]}t[0].match(/^file:\/\/\//)?t[0]=t[0].replace(/^([^/:]+):\/*/,"$1:///"):t[0]=t[0].replace(/^([^/:]+):\/*/,"$1://");for(var i=0;i<t.length;i++){var component=t[i];if("string"!=typeof component)throw new TypeError("Url must be a string. Received "+component);""!==component&&(i>0&&(component=component.replace(/^[\/]+/,"")),component=i<t.length-1?component.replace(/[\/]+$/,""):component.replace(/[\/]+$/,"/"),e.push(component))}var r=e.join("/"),o=(r=r.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return r=o.shift()+(o.length>0?"?":"")+o.join("&")}return function(){return t("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},t.exports?t.exports=c():void 0===(o="function"==typeof(r=c)?r.call(e,n,e,t):r)||(t.exports=o)},367:function(t,e,n){var r=n(5),o=n(41),c=n(11),l=n(368),f="["+l+"]",d=RegExp("^"+f+f+"*"),v=RegExp(f+f+"*$"),h=function(t,e,n){var o={},f=c((function(){return!!l[t]()||"​"!="​"[t]()})),d=o[t]=f?e(m):l[t];n&&(o[n]=d),r(r.P+r.F*f,"String",o)},m=h.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(d,"")),2&e&&(t=t.replace(v,"")),t};t.exports=h},368:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},372:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));n(26),n(15),n(19),n(31),n(32);var r=n(3),o=n(8),c=n(91),l=n(92),f=(n(23),n(362));function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.a)(this,t),this.json=e}var e;return Object(l.a)(t,null,[{key:"setUserAssetDefaultData",value:function(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v(v({},data),{},{name_translations:data.name_translations||{en:"",th:""},brand_translations:data.brand_translations||{en:"",th:""},description_translations:data.description_translations||{en:"",th:""},specific_type_translations:data.specific_type_translations||{en:"",th:""}})}},{key:"show",value:(e=Object(r.a)(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.c)("get",Object(f.d)(f.a,"user_assets/".concat(n)),{headers:Object(f.b)(!0)});case 2:if(200!==(r=e.sent).status){e.next=5;break}return e.abrupt("return",new t(r.data.user_asset));case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})}]),t}()},373:function(t,e,n){t.exports=n.p+"img/home.39c8933.png"},374:function(t,e,n){t.exports=n.p+"img/asset-supply.bad3ec0.png"},384:function(t,e,n){var content=n(421);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(25).default)("3605ddec",content,!0,{sourceMap:!1})},418:function(t,e,n){var r=n(5);r(r.S,"Number",{isInteger:n(419)})},419:function(t,e,n){var r=n(14),o=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&o(t)===t}},420:function(t,e,n){"use strict";n(384)},421:function(t,e,n){var r=n(24)(!1);r.push([t.i,".gk-content[data-v-1f49477f]{background:#2b1505;color:#bd6e51;border-radius:0;border:1px solid #2b1505}.container[data-v-1f49477f],.gk-content[data-v-1f49477f]{min-height:100vh}.title[data-v-1f49477f]{font-size:20px;font-weight:600;color:#693b2f}.cover-image[data-v-1f49477f]{width:100%;background-size:cover;margin:10px 0}.image[data-v-1f49477f]{width:70px;height:100%;-o-object-fit:cover;object-fit:cover}.image-container[data-v-1f49477f]{margin:10px 0}.button-add[data-v-1f49477f]{margin-top:10px;width:90%}[data-v-1f49477f] .ivu-modal-body{padding:0}.text-description[data-v-1f49477f]{word-break:break-word}",""]),t.exports=r},449:function(t,e,n){"use strict";n.r(e);n(45),n(418),n(365);var r=n(372),o=n(364),c={filters:{formatDate:function(t){return Object(o.a)(t)}},data:function(){return{userAsset:new r.a,selectedAssetSupply:r.a.setUserAssetDefaultData(),defaultImage:n(374),currentDate:new Date,isLoading:!0,iconHome:n(373)}},computed:{headerName:function(){return this.$nuxt.$store.getters.getLandingPageHeader}},mounted:function(){this.$nuxt.isOffline?this.$router.push({name:"lost_internet_connection",params:{currentLanguage:this.$store.state.language}}):this.fetchUserAsset()},methods:{fetchUserAsset:function(){var t=this;r.a.show(this.$route.params.userAssetId).then((function(e){t.userAsset=e,t.setDetail(e.json.asset.asset_supplies),t.isLoading=!1})).catch((function(){t.userAsset=new r.a}))},setDetail:function(t){var e=this;t.map((function(data){if(e.$route.params.assetSupplyId===data.id){e.selectedAssetSupply=data;var t=new Date(e.selectedAssetSupply.warranty_expired_datetime);e.selectedAssetSupply.service_life=t.getMonth()-e.currentDate.getMonth()+12*(t.getFullYear()-e.currentDate.getFullYear())}})),this.isLoading=!1},checkExpired:function(){var t=new Date(this.selectedAssetSupply.warranty_expired_datetime).getTime();if(this.currentDate.getTime()<t)return!0},convertServiceLife:function(){var t=this.selectedAssetSupply.service_life/12;return this.selectedAssetSupply.maintenance_datetime?t<1?"".concat(this.selectedAssetSupply.service_life," ").concat(this.$t("info.user_asset.label.mounth")):Number.isInteger(t)?"".concat(t," ").concat(this.$t("info.user_asset.label.year")):"".concat(t.toFixed(0)," ").concat(this.$t("info.user_asset.label.year")," ").concat(this.selectedAssetSupply.service_life," ").concat(this.$t("info.user_asset.label.mounth")):"-"},convertSupplyCategory:function(t){return"electric_device"===t?this.$t("form.asset_supply.label.electric_device"):"furniture"===t?this.$t("form.asset_supply.label.furniture"):"sanitary_ware"===t?this.$t("form.asset_supply.label.sanitary_ware"):"-"},assignDescription:function(){localStorage.setItem("deviceName",JSON.stringify(this.selectedAssetSupply.name_translations)),localStorage.setItem("expiredDatetime",JSON.stringify(this.selectedAssetSupply.warranty_expired_datetime))}}},l=(n(420),n(27)),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isLoading?n("GLoading"):n("div",{staticClass:"container pl-12 pr-12 pt-5"},[n("Card",{staticClass:"header-content",attrs:{bordered:!1,"dis-hover":"",padding:0}},[n("Row",{staticClass:"mt-8 ml-20 mr-20",attrs:{type:"flex",justify:"space-between"}},[n("Col",[n("p",{staticClass:"header-font-size"},[t._v("\n          "+t._s(t.headerName)+"\n        ")])]),t._v(" "),n("Col",[n("img",{staticClass:"header-icon",attrs:{src:t.iconHome}})])],1)],1),t._v(" "),n("Card",{staticClass:"gk-content",attrs:{bordered:!1,"dis-hover":""}},[n("div",{staticClass:"pl-10 pt-10 pb-10"},[t._v("\n      "+t._s(t.selectedAssetSupply.name_translations[t.$store.state.language])+"\n    ")]),t._v(" "),n("div",{staticClass:"text-center image-container"},[n("img",{staticClass:"image",staticStyle:{width:"150px",height:"150px"},attrs:{src:t.selectedAssetSupply.image?t.selectedAssetSupply.image.url:t.defaultImage}})]),t._v(" "),n("div",{staticClass:"pt-8 pb-8",staticStyle:{"border-color":"#ba6b57","border-top-style":"inset"}},[n("span",{staticClass:"text-bold pr-10"},[t._v("\n        "+t._s(t.$t("info.user_asset.label.service_life"))+":\n      ")]),t._v(" "),n("span",[t._v("\n        "+t._s(t.convertServiceLife())+"\n      ")])]),t._v(" "),n("div",{staticClass:"pt-8 pb-8",staticStyle:{"border-color":"#ba6b57","border-top-style":"inset"}},[n("span",{staticClass:"text-bold pr-10"},[t._v("\n        "+t._s(t.$t("info.user_asset.label.latest_maintenance"))+":\n      ")]),t._v("\n      "+t._s(t._f("formatDate")(t.selectedAssetSupply.maintenance_datetime))+"\n    ")]),t._v(" "),n("div",{staticClass:"pt-8",staticStyle:{color:"#fff","border-color":"#ba6b57","border-top-style":"inset"}},[n("span",[t._v(" "+t._s(t.$t("info.user_asset.label.description"))+": ")])]),t._v(" "),n("div",{staticStyle:{color:"#fff"}},[t._v("\n      "+t._s(t.selectedAssetSupply.description_translations[t.$store.state.language]||"-")+"\n    ")]),t._v(" "),n("div",{staticClass:"text-center pt-10"},[t.checkExpired()?n("Button",{staticClass:"button-add",attrs:{type:"primary",size:"large",shape:"circle",to:{name:"projects-projectId-assets-assetId-incidents-form",params:{projectId:t.$route.params.projectId,assetId:t.$route.params.assetId}}},on:{click:t.assignDescription}},[t._v("\n        "+t._s(t.$t("button.new_incident"))+"\n      ")]):t._e()],1)])],1)}),[],!1,null,"1f49477f",null);e.default=component.exports}}]);