(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{362:function(e,t,r){"use strict";r.d(t,"a",(function(){return v})),r.d(t,"d",(function(){return j})),r.d(t,"b",(function(){return w})),r.d(t,"c",(function(){return x}));r(26),r(15),r(19),r(31),r(32);var n=r(8),o=r(3),c=(r(23),r(47)),l=r.n(c),f=r(366),m=r.n(f),d=r(94),y=r.n(d);function h(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var v="".concat("https://altitudeapp.altitude.co.th","/api/v1/user");function j(e,path){return m()(e,path)}function w(e,t){if(!e)return{"Content-Type":"application/json"};var r={"Content-Type":"application/json"};t&&(r={"Content-Type":"multipart/form-data"});var n=y.a.get("token");return n&&(r["auth-token"]="Bearer ".concat(n)),r}function O(e){return e.response&&401===e.response.status&&navigator.onLine&&(window.location.href="/no_permission?locale=".concat(window.$nuxt.$store.state.language)),e.response}function x(e,t,r){return $.apply(this,arguments)}function $(){return($=Object(o.a)(regeneratorRuntime.mark((function e(t,r,n){var o,c,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=w(n.auth),c=_(_({},o),n.headers),e.prev=2,e.next=5,l()({method:t,url:r,headers:c,data:n.data,params:n.params});case 5:return f=e.sent,e.abrupt("return",f);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",O(e.t0));case 12:return e.prev=12,e.finish(12);case 14:case"end":return e.stop()}}),e,null,[[2,9,12,14]])})))).apply(this,arguments)}},364:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return y})),r.d(t,"c",(function(){return h})),r.d(t,"d",(function(){return _}));r(365),r(70),r(16),r(71),r(72),r(67),r(68),r(44),r(40),r(33),r(15),r(42),r(43);var n=r(363),o=r.n(n),c=r(0),l=r.n(c);function f(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw o}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function d(e){return e?l()(e).format("DD/MM/YYYY"):"-"}function y(e){return e?l()(e).local().format("DD/MM/YYYY HH:mm:ss"):"-"}function h(e){return e?Number(e).toFixed(0).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):Number(0)}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=new FormData;return o.a.each(e,(function(c,l){var m=l;if(t&&(m="".concat(t,"[").concat(l,"]")),o.a.includes(r,l))o.a.isArray(c)?o.a.forEach(c,(function(e,t){e instanceof File?(n.append("".concat(m,"[]"),e),n.delete("".concat(m,"[][").concat(t,"][][src]")),n.delete("".concat(m,"[][").concat(t,"][][index]"))):(e.action||(e.action="edit"),o.a.forEach(e,(function(e,t){n.append("".concat(m,"[][").concat(t,"]"),e)})))})):c instanceof File?(n.append("".concat(m),c),n.delete("".concat(m,"[").concat(l,"][][src]")),n.delete("".concat(m,"[").concat(l,"][][index]"))):n.append("".concat(m,"[").concat(l,"]"),c);else if(o.a.isArray(e[l])&&!o.a.isEmpty(e[l]))o.a.each(c,(function(e,r){if(m="".concat(l,"[]"),t&&(m="".concat(t,"[").concat(l,"][]")),o.a.isObject(c[r])&&!o.a.isEmpty(c[r])){var d,y=f(_(e,m).entries());try{for(y.s();!(d=y.n()).done;){var h=d.value;n.append(h[0],h[1])}}catch(e){y.e(e)}finally{y.f()}}else n.append("".concat(m),e)}));else if(o.a.isObject(e[l])){var d,y=f(_(c,m).entries());try{for(y.s();!(d=y.n()).done;){var h=d.value;n.append(h[0],h[1])}}catch(e){y.e(e)}finally{y.f()}}else n.append(m,c)})),n}},365:function(e,t,r){"use strict";var n=r(6),o=r(34),c=r(35),l=r(276),f=r(69),m=r(11),d=r(55).f,y=r(56).f,h=r(13).f,_=r(367).trim,v="Number",j=n.Number,w=j,O=j.prototype,x=c(r(93)(O))==v,$="trim"in String.prototype,k=function(e){var t=f(e,!1);if("string"==typeof t&&t.length>2){var r,n,o,c=(t=$?t.trim():_(t,3)).charCodeAt(0);if(43===c||45===c){if(88===(r=t.charCodeAt(2))||120===r)return NaN}else if(48===c){switch(t.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+t}for(var code,l=t.slice(2),i=0,m=l.length;i<m;i++)if((code=l.charCodeAt(i))<48||code>o)return NaN;return parseInt(l,n)}}return+t};if(!j(" 0o1")||!j("0b1")||j("+0x1")){j=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof j&&(x?m((function(){O.valueOf.call(r)})):c(r)!=v)?l(new w(k(t)),r,j):k(t)};for(var I,P=r(9)?d(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;P.length>E;E++)o(w,I=P[E])&&!o(j,I)&&h(j,I,y(w,I));j.prototype=O,O.constructor=j,r(17)(n,v,j)}},366:function(e,t,r){var n,o,c;c=function(){function e(e){var t=[];if(0===e.length)return"";if("string"!=typeof e[0])throw new TypeError("Url must be a string. Received "+e[0]);if(e[0].match(/^[^/:]+:\/*$/)&&e.length>1){var r=e.shift();e[0]=r+e[0]}e[0].match(/^file:\/\/\//)?e[0]=e[0].replace(/^([^/:]+):\/*/,"$1:///"):e[0]=e[0].replace(/^([^/:]+):\/*/,"$1://");for(var i=0;i<e.length;i++){var component=e[i];if("string"!=typeof component)throw new TypeError("Url must be a string. Received "+component);""!==component&&(i>0&&(component=component.replace(/^[\/]+/,"")),component=i<e.length-1?component.replace(/[\/]+$/,""):component.replace(/[\/]+$/,"/"),t.push(component))}var n=t.join("/"),o=(n=n.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return n=o.shift()+(o.length>0?"?":"")+o.join("&")}return function(){return e("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},e.exports?e.exports=c():void 0===(o="function"==typeof(n=c)?n.call(t,r,t,e):n)||(e.exports=o)},367:function(e,t,r){var n=r(5),o=r(41),c=r(11),l=r(368),f="["+l+"]",m=RegExp("^"+f+f+"*"),d=RegExp(f+f+"*$"),y=function(e,t,r){var o={},f=c((function(){return!!l[e]()||"​"!="​"[e]()})),m=o[e]=f?t(h):l[e];r&&(o[r]=m),n(n.P+n.F*f,"String",o)},h=y.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(m,"")),2&t&&(e=e.replace(d,"")),e};e.exports=y},368:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},387:function(e,t,r){var content=r(427);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(25).default)("6aa4d369",content,!0,{sourceMap:!1})},388:function(e,t,r){var content=r(429);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(25).default)("56998fe1",content,!0,{sourceMap:!1})},426:function(e,t,r){"use strict";r(387)},427:function(e,t,r){var n=r(24)(!1);n.push([e.i,".gk-content-background{background:#fff}",""]),e.exports=n},428:function(e,t,r){"use strict";r(388)},429:function(e,t,r){var n=r(24)(!1);n.push([e.i,".custom-content[data-v-0053beba]{padding:80pt 11.72pt 11.72pt}.custom-content .ivu-row[data-v-0053beba]{margin:5px 0;word-wrap:break-word}.custom-content .ivu-form-item-label[data-v-0053beba],.custom-content .label[data-v-0053beba]{font-weight:600}.custom-button button[data-v-0053beba]{width:100%;font-weight:600;font-size:20px;display:grid}",""]),e.exports=n},444:function(e,t,r){"use strict";r.r(t);var n=r(8),o=r(3),c=(r(33),r(16),r(26),r(15),r(19),r(31),r(32),r(23),r(91)),l=r(92),f=r(363),m=r.n(f),d=r(0),y=r.n(d),h=r(362),_=r(364);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function j(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.a)(this,e),this.json=j(j({},t),{},{name:t.name_translations?t.name_translations.en:"",description:t.description_translations?t.description_translations.en:"",image:t.image||{url:"/assets/default-profile.png"},setup_datetime:t.setup_datetime?y()(t.setup_datetime).format():null,warranty_expired_datetime:t.warranty_expired_datetime?y()(t.warranty_expired_datetime).format():null,maintenance_datetime:t.maintenance_datetime?y()(t.maintenance_datetime).format():null})}var t,r,n;return Object(l.a)(e,[{key:"save",value:(n=Object(o.a)(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=m.a.cloneDeep(this.json)).setup_datetime=r.setup_datetime?y()(r.setup_datetime).unix():"",r.warranty_expired_datetime=r.warranty_expired_datetime?y()(r.warranty_expired_datetime).unix():"",r.maintenance_datetime=r.maintenance_datetime?y()(r.maintenance_datetime).unix():"",n=Object(_.d)(r,"asset_supply",["image"]),this.json.id){e.next=11;break}return e.next=8,Object(h.c)("post",Object(h.d)(h.a,"user_assets/".concat(t,"/asset_supplies")),{headers:Object(h.b)(!0),data:n});case 8:o=e.sent,e.next=14;break;case 11:return e.next=13,Object(h.c)("patch",Object(h.d)(h.a,"user_assets/".concat(t,"/asset_supplies/").concat(this.json.id)),{headers:Object(h.b)(!0),data:n});case 13:o=e.sent;case 14:return e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}],[{key:"show",value:(r=Object(o.a)(regeneratorRuntime.mark((function t(r,n){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(h.c)("get",Object(h.d)(h.a,"user_assets/".concat(r,"/asset_supplies/").concat(n)),{headers:Object(h.b)(!0)});case 2:if(200!==(o=t.sent).status){t.next=5;break}return t.abrupt("return",new e(o.data.asset_supply));case 5:return t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)}))),function(e,t){return r.apply(this,arguments)})},{key:"delete",value:(t=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.c)("delete",Object(h.d)(h.a,"user_assets/".concat(t,"/asset_supplies/").concat(r)),{headers:Object(h.b)(!0)});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),function(e,r){return t.apply(this,arguments)})}]),e}();function O(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function x(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var $={props:{isNew:{type:Boolean,default:function(){return!1}},defaultData:{type:Object,default:function(){return{}}},type:{type:String,default:function(){return"new"}}},data:function(){return{form:new w,isLoading:!0,facilityTypes:[{en:"Electric device",th:"เครื่องใช้ไฟฟ้า",value:"electric_device"},{en:"Furniture",th:"เฟอร์นิเจอร์",value:"furniture"},{en:"Sanitary ware",th:"สุขภัณฑ์",value:"sanitary_ware"}],rules:{name:[{required:!0,message:this.$t("form.asset_supply.label.name")+this.$t("errors.cannot_be_blank"),trigger:"change"}],supply_category:[{required:!0,message:this.$t("form.asset_supply.label.supply_category")+this.$t("errors.cannot_be_blank"),trigger:"change"}]}}},mounted:function(){var e=this;this.$nuxt.isOffline?this.$router.push({name:"lost_internet_connection",params:{currentLanguage:this.$store.state.language}}):this.isNew?setTimeout((function(){e.isLoading=!1}),500):this.fetchAssetSupply()},methods:{hideKeyboard:function(){document.activeElement.blur()},fetchAssetSupply:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.show(e.$route.params.userAssetId,e.$route.params.assetSupplyId);case 2:e.form=t.sent,e.form.json.setup_datetime=""!==e.form.json.warranty_expired_datetime?new Date(e.form.json.setup_datetime):"",e.form.json.warranty_expired_datetime=""!==e.form.json.warranty_expired_datetime?new Date(e.form.json.warranty_expired_datetime):"",e.form.json.maintenance_datetime=e.form.json.maintenance_datetime?new Date(e.form.json.maintenance_datetime):"",e.isLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},handleSubmit:function(){var e=this;return this.form.json.name_translations={en:this.form.json.name,th:this.form.json.name},this.form.json.brand_translations={en:this.form.json.brand,th:this.form.json.brand},this.form.json.description_translations={en:this.form.json.description,th:this.form.json.description},new Promise((function(t){e.$Modal.confirm({title:e.$t("messages.are_you_sure"),content:e.$t("messages.confirm_save"),onOk:function(){e.submitForm()}})}))},updateFormData:function(e){this.form.json=x(x({},this.form.json),e)},submitForm:function(){var e=this;this.$nuxt.isOffline?this.$router.push({name:"lost_internet_connection",params:{currentLanguage:this.$store.state.language}}):this.$refs.form.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=6;break}return t.next=3,e.form.save(e.$route.params.userAssetId);case 3:n=t.sent,e.isLoading=!0,n.data&&n.data.success?(e.$Message.success(e.$t("breadcrumb.device")+e.$t("messages.successfully_created")),e.$router.push({name:"projects-projectId-assets-assetId-user_assets-userAssetId-user_asset",params:{projectId:e.$route.params.projectId,userAssetId:e.$route.params.userAssetId},query:{jwt:e.$store.state.token,locale:e.$store.state.language}})):n.data&&n.data.error?e.$Message.error(n.data.error):e.$Message.error(e.$t("messages.fail"));case 6:e.isLoading=!1;case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},k=(r(426),r(428),r(27)),component=Object(k.a)($,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isLoading?r("GLoading"):r("div",[r("GBreadcrumb",{attrs:{title:(e.isNew?e.$t("breadcrumb.new"):e.$t("breadcrumb.edit"))+e.$t("breadcrumb.device")}}),e._v(" "),r("div",{staticClass:"custom-content"},[r("Form",{ref:"form",attrs:{model:e.form.json,"label-position":"top",rules:e.rules}},[r("Row",[r("FormItem",{attrs:{prop:"supply_category",label:e.$t("form.asset_supply.label.supply_category")}},[r("Select",{attrs:{placeholder:e.$t("form.asset_supply.placeholder.select_type")},model:{value:e.form.json.supply_category,callback:function(t){e.$set(e.form.json,"supply_category",t)},expression:"form.json.supply_category"}},e._l(e.facilityTypes,(function(t){return r("Option",{key:t.value,attrs:{value:t.value,label:t[e.$store.state.language]}})})),1)],1)],1),e._v(" "),r("Row",[r("FormItem",{attrs:{prop:"name",label:e.$t("form.asset_supply.label.name")}},[r("Input",{attrs:{type:"text",placeholder:e.$t("form.asset_supply.placeholder.name")},model:{value:e.form.json.name,callback:function(t){e.$set(e.form.json,"name",t)},expression:"form.json.name"}})],1)],1),e._v(" "),r("Row",[r("FormItem",{attrs:{prop:"description",label:e.$t("form.asset_supply.label.description")}},[r("Input",{attrs:{type:"textarea",placeholder:e.$t("form.asset_supply.placeholder.description")},model:{value:e.form.json.description,callback:function(t){e.$set(e.form.json,"description",t)},expression:"form.json.description"}})],1)],1),e._v(" "),r("Row",[r("FormItem",{attrs:{label:e.$t("form.asset_supply.label.setup_datetime"),prop:"setup_datetime"}},[r("DatePicker",{attrs:{format:"dd/MM/yyyy",placeholder:e.$t("form.asset_supply.placeholder.start_datetime"),type:"date"},nativeOn:{click:function(t){return e.hideKeyboard()}},model:{value:e.form.json.setup_datetime,callback:function(t){e.$set(e.form.json,"setup_datetime",t)},expression:"form.json.setup_datetime"}})],1)],1),e._v(" "),r("Row",[r("FormItem",{attrs:{label:e.$t("form.asset_supply.label.warranty_expired_datetime"),prop:"warranty_expired_datetime"}},[r("DatePicker",{attrs:{format:"dd/MM/yyyy",placeholder:e.$t("form.asset_supply.placeholder.expired_datetime"),type:"date"},nativeOn:{click:function(t){return e.hideKeyboard()}},model:{value:e.form.json.warranty_expired_datetime,callback:function(t){e.$set(e.form.json,"warranty_expired_datetime",t)},expression:"form.json.warranty_expired_datetime"}})],1)],1),e._v(" "),r("Row",[r("FormItem",{attrs:{label:e.$t("form.asset_supply.label.maintenance_datetime"),prop:"maintenance_datetime"}},[r("DatePicker",{attrs:{format:"dd/MM/yyyy",placeholder:e.$t("form.asset_supply.placeholder.maintenance_history"),type:"date"},nativeOn:{click:function(t){return e.hideKeyboard()}},model:{value:e.form.json.maintenance_datetime,callback:function(t){e.$set(e.form.json,"maintenance_datetime",t)},expression:"form.json.maintenance_datetime"}})],1)],1),e._v(" "),r("Row",[r("Col",{staticStyle:{"padding-bottom":"10px"},attrs:{span:"24"}},[e._v("\n          "+e._s(e.$t("form.asset_supply.label.attachment"))+"\n        ")]),e._v(" "),r("Col",{attrs:{span:"24"}},[r("GUpload",{attrs:{"field-key":"image"},on:{updateParentValue:e.updateFormData},model:{value:e.form.json.image,callback:function(t){e.$set(e.form.json,"image",t)},expression:"form.json.image"}})],1)],1)],1),e._v(" "),r("br"),e._v(" "),r("div",{staticClass:"custom-button"},[r("Button",{attrs:{type:"primary",size:"large"},on:{click:e.handleSubmit}},[e._v("\n        "+e._s(e.$t("button.submit"))+"\n      ")])],1)],1)],1)}),[],!1,null,"0053beba",null);t.default=component.exports}}]);